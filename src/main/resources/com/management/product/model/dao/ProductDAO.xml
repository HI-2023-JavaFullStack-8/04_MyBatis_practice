<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.management.product.model.dao.ProductDAO">

    <resultMap id="productResultMap" type="com.management.product.model.dto.ProductDTO">
        <id property="code" column="product_code"/>
        <result property="name" column="product_name"/>
        <result property="originCode" column="origin_cost"/>
        <result property="releaseDate" column="release_date"/>
        <result property="discountRate" column="discount_rate"/>
        <result property="salesQuantity" column="sales_quantity"/>
        <result property="stockQuantity" column="stock_quantity"/>
        <result property="categoryCode" column="category_code"/>
        <result property="productionStatus" column="production_status"/>
    </resultMap>

    <select id="selectAllProductList" resultMap="productResultMap">
        SELECT *
          FROM product_info
         WHERE product_info = 'Y'
    </select>

    <select id="selectProductByCondition" resultMap="productResultMap">
        SELECT *
          FROM product_info
        <if test="option == productName">
            WHERE product_name LIKE '%#{option}%';
        </if>
        <if test="option== '백화점'">
            WHERE discount_rate = 0;
        </if>
        <if test="option== '아울렛">
            WHERE discount_rate qte 1;
        </if>
        <if test="option== newProduct">
            WHERE release_date LIKE '202305%'
        </if>
        <if test="option== nonProduction">
            WHERE production_status = 'N'
        </if>
    </select>

    <!-- 5. 제품 정보를 등록하는 쿼리를 작성하세요.
            (쿼리id) insertProduct -->
    <select id="insertProduct" resultMap="productResultMap">
        INSERT INTO product_info
        ()
    </select>

    <!-- 6. 사용자가 수정을 원하는 데이터만 수정하도록 Dynamic Query를 활용한 쿼리를 작성하세요.
            (쿼리id) updateProduct -->

    <!-- 7. 제품 정보를 삭제하는 쿼리를 작성하세요.
            (쿼리id) deleteProduct -->

</mapper>
